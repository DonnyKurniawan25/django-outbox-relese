var breakpointDefinition={tablet:1024,phone:480},responsiveHelper_datatable_tabletools=void 0;function do_edit(o){window.location.href="update/"+o}function do_delete(o,e){confirm('Anda yakin menghapus data "'+e+'"?')&&(window.location.href="delete/"+o)}function do_create(o){$("#do_create").click(function(){window.location.href=o})}function do_cancel(o,e,t){$(o).click(function(){confirm('Batalkan proses "'+e+'"?')&&(window.location.href=t)})}function do_create_table(o,c=!1,d=!0,p=!0){$.ajax({url:o,dataSrc:"",success:function(o){var e=[],t=[],a={},n=!0,l={},r="",s=-1;for(key in o){if(n){for(i in tmp=Object.keys(o[key]))"icon"==tmp[i]?e.push({title:"",data:tmp[i]}):e.push({title:tmp[i],data:tmp[i]}),3==i&&(r=tmp[i]),"Foto"==tmp[i]&&(s=i,console.log("foto idx change",i)),console.log("=",s);n=!n}(l=o[key]).icon=null,l.action=null,t.push(l)}a.columns=e,a.data=t,c&&1<=t.length&&$("#do_create").hide(),0<a.data.length?$("#datatable_tabletools").DataTable({data:a.data,columns:a.columns,order:[[2,"desc"]],columnDefs:[{targets:[1,2],visible:!1,searchable:!1},{targets:0,width:"5px",sortable:!1,searchable:!1},{targets:[a.columns.length-2],width:"100px",sortable:!1,searchable:!1},{targets:[-1<s?parseInt(s):"-1"],render:function(o){return null!=o?'<img src="/media/'+o+'" class="img-thumbnail">':"tidak ada"}},{targets:[3],render:function(o,e,t){return"<a href='javascript:void(0);' onclick='do_edit(\""+t.uuid+"\");' title='Edit Data'><strong>"+o+"</strong></a>"}},{targets:[a.columns.length-1],width:"60px",sortable:!1,searchable:!1,render:function(o,e,t){var a="";return d&&(a="<button onclick='do_edit(\""+t.uuid+"\");' class='btn btn-success btn-xs' title='Edit Data'>     <i class='fa fa-edit'></i> </button> "),"<div class='toolbar text-right'>"+(a=p?a+"<button onclick='do_delete(\""+t.uuid+'", "'+t[r]+"\");' class='btn btn-danger btn-xs' title='Hapus Data'>     <i class='fa fa-eraser'></i> </button>":a)+"</div>"}}],sDom:"<'dt-toolbar text-right'<'col-xs-12 col-sm-6 'f><'toolbar'>r>t<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",autoWidth:!0}):($("#no-data").empty(),$("#no-data").append('<p class="alert alert-info no-margin">No data to display ...  </p>'))}})}$(document).ready(function(){$("#id_file_path").on("change",function(){var o;console.log("enter on file change"),this.files&&this.files[0]&&(console.log("inside trigger photo"),(o=new FileReader).onload=function(o){$("#image").attr("src",o.target.result),$("#form-id").val("photo"),$("#modalCrop").modal("show")},o.readAsDataURL(this.files[0]))});var e,t,i=$("#image"),a={left:0,top:0,width:400,height:400};$("#modalCrop").on("show.bs.modal",function(){$(".js-crop-and-upload").removeAttr("disabled").text("Crop and Upload"),ww=$("#id_dim_w").val(),hh=$("#id_dim_h").val();var o=ww/hh;console.log("aspect ratio",o),i.cropper({viewMode:0,aspectRatio:o,zoomable:!0,dragMode:"move",center:!0,cropBoxResizable:!0,ready:function(){i.cropper("setCropBoxData",a),i.cropper("setCanvasData",t),i.cropper("setCropBoxData",e)}})}).on("hidden.bs.modal",function(){console.log("on hidden event"),e=i.cropper("getCropBoxData"),t=i.cropper("getCanvasData"),i.cropper("destroy")}),$(".js-zoom-in").on("click",function(){console.log("inside zoom in"),i.cropper("zoom",.1)}),$(".js-zoom-out").on("click",function(){i.cropper("zoom",-.1)}),$(".js-move-to-0-0").on("click",function(){console.log("inside move 0,0"),i.cropper("moveTo",0)}),$(".js-crop-and-upload").on("click",function(){$(".js-crop-and-upload").attr("disabled",!0).text("Processing ...");i.cropper("getData");var a=$("#form-id").val(),o=i.cropper("getCroppedCanvas"),n=$("#id_save_as_png").val();console.log("save_as_png=",n),o.toBlob(function(o){var e=new FormData,o=(e.append("photo",o),$('input[name="csrfmiddlewaretoken"]').val()),t=(console.log("value before upload = "),console.log($("#id_file_path").val()),console.log(a),"");"1"==n&&(t="1/",console.log("do save as png")),$.ajax("/dashboard/upload-photo/"+ww+"/"+hh+"/"+t,{method:"POST",data:e,processData:!1,contentType:!1,async:!1,cache:!1,timeout:3e4,headers:{"X-CSRFToken":o},success:function(o){console.log("response = "),console.log(o),$("#id_str_file_path").val(o),$("#modalCrop").modal("hide")},error:function(){console.log("Upload error")}})})})});